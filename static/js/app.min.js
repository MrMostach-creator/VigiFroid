(function(){"use strict";function e(e,t){return(t||document).querySelector(e)}function t(e,t){return(t||document).querySelectorAll(e)}function n(e){if(!e)return null;const t=/^(\d{4})-(\d{2})-(\d{2})$/.exec(String(e).trim());if(!t)return null;const n=new Date(Number(t[1]),Number(t[2])-1,Number(t[3]));return isNaN(n)?null:n}function a(){const a=t(".lot-card");if(!a.length)return;const o=new Date;o.setHours(0,0,0,0),a.forEach(t=>{const a=t.getAttribute("data-expiry"),r=e(".days-badge",t),i=n(a);if(!r)return;i?(i.setHours(0,0,0,0),r.textContent=Math.ceil((i-o)/864e5)<0?"0":String(Math.abs(Math.ceil((i-o)/864e5)))):r.textContent="--"})}function o(){const t=e("#image");if(!t)return;let n="";t.addEventListener("change",e=>{const t=e.target.files[0],a=t?t.name:"";if(a&&a===n){const t=window.i18n&&window.i18n.alreadySelected||"You already selected this file";return alert(t),void(e.target.value="")}n=a,"function"==typeof window.validateAdd&&window.validateAdd(),"function"==typeof window.validateEdit&&window.validateEdit()}),window.addEventListener("beforeunload",e=>{t.files&&t.files.length&&(e.preventDefault(),e.returnValue="")})}window.addEventListener("resize",()=>{a()}),document.addEventListener("DOMContentLoaded",()=>{try{a()}catch(e){}try{o()}catch(e){}})})();document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".lang-menu-wrap"),t=e?e.querySelector(".lang-toggle"):null,n=e?e.querySelector(".lang-container"):null;if(!e||!t||!n)return;const a=()=>e.classList.remove("active");t.addEventListener("click",t=>{t.stopPropagation(),e.classList.toggle("active")}),document.addEventListener("click",t=>{e.classList.contains("active")&&!e.contains(t.target)&&a()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&a()})}),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".theme-toggle");function t(t){const n={clair:"light",sombre:"dark",light:"light",dark:"dark"},a=n[t]||"light";document.body.setAttribute("data-theme",a),localStorage.setItem("theme",t),e.forEach(e=>e.classList.remove("active")),e.forEach(e=>{e.dataset.theme===t&&e.classList.add("active")})}const n=localStorage.getItem("theme")||"clair";t(n),e.forEach(e=>{e.addEventListener("click",()=>t(e.dataset.theme))})});
