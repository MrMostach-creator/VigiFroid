# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ“ unseed_test_data.py
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"""
ğŸ”¹ Ø³ÙƒØ±ÙŠØ¨Øª ØªÙ†Ø¸ÙŠÙ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
ÙƒÙŠØ­Ø°Ù ÙÙ‚Ø· Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ© (Ø§Ù„Ù„ÙŠ ÙÙŠÙ‡Ø§ 'Test' ÙÙŠ Ø§Ù„Ø§Ø³Ù…)
Ø¨Ø¯ÙˆÙ† Ù…Ø§ ÙŠÙ…Ø³Ù‘ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø£ØµÙ„ÙŠØ©
"""

from vigi import create_app
from vigi.extensions import db
from models import Lot

app = create_app("config.Config")

with app.app_context():
    print("ğŸ§¹ Ø¨Ø¯Ø¡ ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©...")

    # Ù†Ø­Ø°Ù ÙƒÙ„ Lot ÙÙŠÙ‡ Ø§Ù„ÙƒÙ„Ù…Ø© "Test" ÙØ§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬
    deleted = db.session.query(Lot).filter(Lot.product_name.ilike("%Test%")).delete(synchronize_session=False)
    db.session.commit()

    print(f"âœ… ØªÙ… Ø­Ø°Ù {deleted} Ù…Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!")
